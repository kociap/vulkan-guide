<svg width="600" height="300" xmlns="http://www.w3.org/2000/svg">
  <!-- Dark background -->
  <rect width="600" height="300" fill="#1a1a1a"/>
  
  <!-- Title -->
  <text x="300" y="25" font-family="monospace" font-size="14" text-anchor="middle" fill="#e0e0e0">Draw Indirect Flow</text>
  
  <!-- Step boxes -->
  <rect x="50" y="50" width="120" height="50" fill="none" stroke="#666" stroke-width="1"/>
  <text x="110" y="70" font-family="monospace" font-size="10" text-anchor="middle" fill="#e0e0e0">ChunkDrawInfo[]</text>
  <text x="110" y="85" font-family="monospace" font-size="9" text-anchor="middle" fill="#aaa">CPU â†’ GPU</text>
  
  <rect x="240" y="50" width="120" height="50" fill="none" stroke="#666" stroke-width="1"/>
  <text x="300" y="70" font-family="monospace" font-size="10" text-anchor="middle" fill="#e0e0e0">Compute Cull</text>
  <text x="300" y="85" font-family="monospace" font-size="9" text-anchor="middle" fill="#aaa">[256,1,1] threads</text>
  
  <rect x="430" y="50" width="120" height="50" fill="none" stroke="#666" stroke-width="1"/>
  <text x="490" y="70" font-family="monospace" font-size="10" text-anchor="middle" fill="#e0e0e0">DrawIndirect[]</text>
  <text x="490" y="85" font-family="monospace" font-size="9" text-anchor="middle" fill="#aaa">+ drawCount</text>
  
  <!-- Arrows -->
  <path d="M 170 75 L 230 75" stroke="#888" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 360 75 L 420 75" stroke="#888" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#888"/>
    </marker>
  </defs>
  
  <!-- Compute shader details -->
  <text x="300" y="140" font-family="monospace" font-size="12" text-anchor="middle" fill="#e0e0e0">Compute Shader Logic:</text>
  
  <text x="50" y="165" font-family="monospace" font-size="9" fill="#ccc">if (idx &lt; chunkCount &amp;&amp; chunkInfo[idx].drawcount &gt; 0) {</text>
  <text x="70" y="180" font-family="monospace" font-size="9" fill="#ccc">if (IsVisible(chunkInfo[idx], sceneData)) {</text>
  <text x="90" y="195" font-family="monospace" font-size="9" fill="#ccc">uint drawIdx = atomicAdd(drawCount[0], 1);</text>
  <text x="90" y="210" font-family="monospace" font-size="9" fill="#ccc">drawCommands[drawIdx].chunkx = chunkInfo[idx].position_x;</text>
  <text x="90" y="225" font-family="monospace" font-size="9" fill="#ccc">drawCommands[drawIdx].indexCount = chunkInfo[idx].drawcount * 6;</text>
  <text x="90" y="240" font-family="monospace" font-size="9" fill="#ccc">drawCommands[drawIdx].vertexOffset = chunkInfo[idx].index * 4;</text>
  <text x="70" y="255" font-family="monospace" font-size="9" fill="#ccc">}</text>
  <text x="50" y="270" font-family="monospace" font-size="9" fill="#ccc">}</text>
</svg>